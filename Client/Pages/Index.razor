@page "/"

@attribute [Authorize]
<PageTitle>Index</PageTitle>
<RadzenRow Gap="5" RowGap="5">
    <RadzenColumn Size="12">
        <RadzenText Text="Welcome to your new app" TextStyle="Radzen.Blazor.TextStyle.DisplayH2" TagName="Radzen.Blazor.TagName.Auto"></RadzenText>
        <RadzenText Text="Your Success Is Our Biggest Priority" TextStyle="Radzen.Blazor.TextStyle.H4" TagName="Radzen.Blazor.TagName.H2" class="mt-5"></RadzenText>
        <RadzenText Text="With Radzen Blazor Studio, application development is just one-click away." TextStyle="Radzen.Blazor.TextStyle.Body1" TagName="Radzen.Blazor.TagName.Auto" class="mt-4" Style="font-size: 20px; line-height: 24px"></RadzenText>
        <RadzenText Text="Simple to setup, maintain and update." TextStyle="Radzen.Blazor.TextStyle.Body1" TagName="Radzen.Blazor.TagName.Auto" class="mt-3" Style="font-size: 20px; line-height: 24px"></RadzenText>
        <RadzenCard Style="margin-top: 40px; padding: 20px 40px 40px;">
            <RadzenRow>
                <RadzenColumn Size="12" SizeMD="4">
                    <RadzenIcon Icon="smart_button" Style="margin-top: 20px; width: 48px; height: 48px; font-size: 48px; color: var(--rz-text-title-color);"></RadzenIcon>
                    <RadzenText Text="Learn the Fundamentals" TextStyle="Radzen.Blazor.TextStyle.DisplayH6" TagName="Radzen.Blazor.TagName.H3"></RadzenText>
                    <RadzenLink Text="Docs" Path="https://www.radzen.com/blazor-studio/documentation/" Icon="east" Target="_blank" Style="font-size: 18px"></RadzenLink>
                    <RadzenLink Text="Videos" Path="https://youtube.com/playlist?list=PLQyJPeb3xHcBij_RbHD__2TOo8Jv5HQVc" Icon="east" Target="_blank" Style="display: block; font-size: 18px"></RadzenLink>
                </RadzenColumn>
                <RadzenColumn Size="12" SizeMD="4">
                    <RadzenIcon Icon="code" Style="margin-top: 20px; width: 48px; height: 48px; font-size: 48px; color: var(--rz-text-title-color);"></RadzenIcon>
                    <RadzenText Text="Radzen Blazor Components" TextStyle="Radzen.Blazor.TextStyle.DisplayH6" TagName="Radzen.Blazor.TagName.H3"></RadzenText>
                    <RadzenLink Text="Demos" Path="https://blazor.radzen.com" Icon="east" Target="_blank" Style="font-size: 18px"></RadzenLink>
                </RadzenColumn>
                <RadzenColumn Size="12" SizeMD="4">
                    <RadzenIcon Icon="people_outline" Style="margin-top: 20px; width: 48px; height: 48px; font-size: 48px; color: var(--rz-text-title-color);"></RadzenIcon>
                    <RadzenText Text="Radzen Community" TextStyle="Radzen.Blazor.TextStyle.DisplayH6" TagName="Radzen.Blazor.TagName.H3"></RadzenText>
                    <RadzenLink Text="Radzen Blazor Studio Forums" Path="https://forum.radzen.com/c/radzen-blazor-studio/12" Icon="east" Target="_blank" Style="font-size: 18px"></RadzenLink>
                </RadzenColumn>
            </RadzenRow>
        </RadzenCard>
    </RadzenColumn>
</RadzenRow>


@* @page "/"

@attribute [Authorize]

<PageTitle>Index</PageTitle>
<div class="row">
    <div class="col-xl-6">
        <div class="card p-3 mx-2 my-3 shadow-sm">
            <div class="row">
                <div class="col-4">
                    <i class="bi-currency-dollar" style="width: 64px; height: 64px; font-size: 48px"></i>
                </div>
                <div class="col-8">
                    <p class="h5 text-end pb-2" style="line-height: 1em;">
                        <span class="m-0 fw-bold">Revenue</span><br />
                        <span class="text-uppercase fw-bold" style="font-size: 12px;">Last month</span>
                    </p>
                    <p class="h4 text-end fw-bold">
                        <span class="my-2">@varStats?.Revenue.ToString("C")</span>
                    </p>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xl-6">
        <div class="card p-3 mx-2 my-3 shadow-sm">
            <div class="row">
                <div class="col-4">
                    <i class="bi-cart-fill" style="width: 64px; height: 64px; font-size: 48px"></i>
                </div>
                <div class="col-8">
                    <p class="h5 text-end pb-2" style="line-height: 1em;">
                        <span class="m-0 fw-bold">Opportunities</span><br />
                        <span class="text-uppercase fw-bold" style="font-size: 12px;">Last month</span>
                    </p>
                    <p class="h4 text-end fw-bold">
                        <span class="my-2">@varStats?.Opportunities.ToString("C")</span>
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-xl-6">
        <div class="card p-3 mx-2 my-3 shadow-sm">
            <div class="row">
                <div class="col-4">
                    <i class="bi-hand-thumbs-down-fill text-danger" style="width: 64px; height: 64px; font-size: 48px"></i>
                </div>
                <div class="col-8">
                    <p class="h5 text-end pb-2" style="line-height: 1em;">
                        <span class="m-0 fw-bold">Average Deal Size</span><br />
                        <span class="text-uppercase fw-bold" style="font-size: 12px;">Last month</span>
                    </p>
                    <p class="h4 text-end fw-bold">
                        <span class="my-2">@varStats?.AverageDealSize.ToString("C")</span>
                    </p>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xl-6">
        <div class="card p-3 mx-2 my-3 shadow-sm">
            <div class="row">
                <div class="col-4">
                    <i class="bi-hand-thumbs-up-fill text-success" style="width: 64px; height: 64px; font-size: 48px"></i>
                </div>
                <div class="col-8">
                    <p class="h5 text-end pb-2" style="line-height: 1em;">
                        <span class="m-0 fw-bold">Win Rate</span><br />
                        <span class="text-uppercase fw-bold" style="font-size: 12px;">Last month</span>
                    </p>
                    <p class="h4 text-end fw-bold">
                        <span class="my-2">@varStats?.Ratio.ToString("P")</span>
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>


@* Shane did this here  *@
@* 
<div class="row">
    <div class="col-xl-6">
        <div class="card p-3 mx-2 my-3 shadow-sm">
            <div class="row">
                <div class="col-4">
                    <i class="bi-fingerprint" style="width: 64px; height: 64px; font-size: 48px"></i>
                </div>
                <div class="col-8">
                    <p class="h5 text-end pb-2" style="line-height: 1em;">
                        <span class="m-0 fw-bold">Database ID</span><br />
                        <span class="text-uppercase fw-bold" style="font-size: 12px;">Stored Procedure</span>
                    </p>
                    <p class="h4 text-end fw-bold">
                        <span class="my-2">@varGetEmployeesWithDepartment?.Id.ToString("C")</span>
                    </p>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xl-6">
        <div class="card p-3 mx-2 my-3 shadow-sm">
            <div class="row">
                <div class="col-4">
                    <i class="bi-person-circle" style="width: 64px; height: 64px; font-size: 48px"></i>
                </div>
                <div class="col-8">
                    <p class="h5 text-end pb-2" style="line-height: 1em;">
                        <span class="m-0 fw-bold">Employee Name</span><br />
                        <span class="text-uppercase fw-bold" style="font-size: 12px;">Stored Procedure</span>
                    </p>
                    <p class="h4 text-end fw-bold">
                        <span class="my-2">@varGetEmployeesWithDepartment?.Name</span>
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-xl-6">
        <div class="card p-3 mx-2 my-3 shadow-sm">
            <div class="row">
                <div class="col-4">
                    <i class="bi-bank2" style="width: 64px; height: 64px; font-size: 48px"></i>
                </div>
                <div class="col-8">
                    <p class="h5 text-end pb-2" style="line-height: 1em;">
                        <span class="m-0 fw-bold">Salary</span><br />
                        <span class="text-uppercase fw-bold" style="font-size: 12px;">Stored Procedure</span>
                    </p>
                    <p class="h4 text-end fw-bold">
                        <span class="my-2">@varGetEmployeesWithDepartment?.Salary.ToString("C")</span>
                    </p>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xl-6">
        <div class="card p-3 mx-2 my-3 shadow-sm">
            <div class="row">
                <div class="col-4">
                    <i class="bi-arrows-move" style="width: 64px; height: 64px; font-size: 48px"></i>
                </div>
                <div class="col-8">
                    <p class="h5 text-end pb-2" style="line-height: 1em;">
                        <span class="m-0 fw-bold">Bonus</span><br />
                        <span class="text-uppercase fw-bold" style="font-size: 12px;">Stored Procedure</span>
                    </p>
                    <p class="h4 text-end fw-bold">
                        <span class="my-2">@varGetEmployeesWithDepartment?.Bonus.ToString("C")</span>
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="row">
    <div class="col-12">
        <div class="card p-3 mx-2 my-3 shadow-sm">
            <h2 class="fw-bold">Customer life time value</h2>
 *@            @*             <DxChart Data="@varRevenueByCompany" T="Throttle_Core_CRM.Shared.Models.clsRevenueByCompany" Width="100%">
            <DxChartBarSeries Name="Company"
            T="Throttle_Core_CRM.Shared.Models.clsRevenueByCompany"
            TArgument="string"
            TValue="decimal"
            ArgumentField="pasi => pasi.Company"
            ValueField="pasi => pasi.Revenue"
            SummaryMethod="Enumerable.Sum" />
            <DxChartLegend Position="RelativePosition.Outside"
            HorizontalAlignment="HorizontalAlignment.Center"
            VerticalAlignment="VerticalEdge.Bottom" />


            <DxChartBarSeries Name="Company" T="Throttle_Core_CRM.Shared.Models.clsRevenueByCompany" TArgument="string" TValue="int"/>
            </DxChart> *@
           @*  <RadzenChart Style="width: 100%">
                <RadzenColumnSeries TItem="Throttle_Core_CRM.Shared.Models.clsRevenueByCompany" Data="@varRevenueByCompany" ValueProperty="Revenue" CategoryProperty="Company"></RadzenColumnSeries>
            </RadzenChart>
        </div>
    </div>
    <div class="col-12">
        <div class="card p-3 mx-2 my-3 shadow-sm">
            <h2 class="fw-bold">Revenue</h2>
            <RadzenChart Style="width: 100%">
                <RadzenAreaSeries TItem="Throttle_Core_CRM.Shared.Models.clsRevenueByMonth" Data="@varRevenueByMonth" ValueProperty="Revenue" CategoryProperty="Month"></RadzenAreaSeries>
            </RadzenChart>
        </div>
    </div>
    <div class="col-12">
        <div class="card p-3 mx-2 my-3 shadow-sm">
            <h2 class="fw-bold">Customer life time value</h2>
            <RadzenChart Style="width: 100%">
                <RadzenBarSeries TItem="Throttle_Core_CRM.Shared.Models.clsRevenueByEmployee" Data="@varRevenueByEmployee" ValueProperty="Revenue" CategoryProperty="Employee"></RadzenBarSeries>
            </RadzenChart>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-12">
        <div class="card p-3 mx-2 my-3 shadow-sm">
            <h2 class="fw-bold">Text</h2>
            <RadzenDataGrid TItem="Throttle_Core_CRM.Server.Models.WebSiteDB.Opportunity" Data="@getOpportunitiesResult" AllowSorting="true" AllowPaging="true" LoadData="@getOpportunitiesResultLoadData" Count="@getOpportunitiesResultCount">
                <Columns>
                    <RadzenDataGridColumn TItem="Server.Models.WebSiteDB.Opportunity" Title="Contact" SortProperty="Contact.FirstName">
                        <Template>
                            <RadzenLabel Text="@context.Contact.FirstName" />
                            <RadzenLabel Text="@context.Contact.LastName" />
                        </Template>
                    </RadzenDataGridColumn>
                    <RadzenDataGridColumn TItem="Server.Models.WebSiteDB.Opportunity" Title="Amount" Property="Amount">
                        <Template>
                            <RadzenLabel Text="@context.Amount.ToString("C")" />
                        </Template>
                    </RadzenDataGridColumn>
                    <RadzenDataGridColumn TItem="Server.Models.WebSiteDB.Opportunity" Title="Status" Property="OpportunityStatus.Name" />
                    <RadzenDataGridColumn TItem="Server.Models.WebSiteDB.Opportunity" Title="CloseDate" Property="CloseDate" />
                </Columns>
            </RadzenDataGrid>
        </div>
    </div>
    <div class="col-12">
        <div class="card p-3 mx-2 my-3 shadow-sm">
            <h2 class="fw-bold">Active Tasks</h2>
            <RadzenDataGrid TItem="Throttle_Core_CRM.Server.Models.WebSiteDB.Task" Data="@getTasksResult" AllowSorting="true" AllowPaging="true" LoadData="@getTasksResultLoadData" Count="@getTasksResultCount">
                <Columns>
                    <RadzenDataGridColumn TItem="Server.Models.WebSiteDB.Task" Title="Employee" SortProperty="Opportunity.User.FirstName">
                        <Template>
                            <RadzenImage Path="@context.Opportunity.User.Picture" style="width:30px;height:30px;border-radius:15px;" />
                            <RadzenLabel Text="@context.Opportunity.User.FirstName" />
                            <RadzenLabel Text="@context.Opportunity.User.LastName" />
                        </Template>
                    </RadzenDataGridColumn>
                    <RadzenDataGridColumn TItem="Server.Models.WebSiteDB.Task" Title="Title" Property="Title" SortProperty="Opportunity.Name">
                        <Template>
                            <RadzenLabel Text="@context.Opportunity.Name" style="display: block" />
                            <RadzenLabel Text="@context.Opportunity.Contact.FirstName" />
                            <RadzenLabel Text="@context.Opportunity.Contact.LastName" />
                        </Template>
                    </RadzenDataGridColumn>
                    <RadzenDataGridColumn TItem="Server.Models.WebSiteDB.Task" Title="DueDate" Property="DueDate" />
                </Columns>
            </RadzenDataGrid>
        </div>
    </div>
</div> *@

